{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ restaurant.name }}</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <div class="header">
        <div class="container">
            <a href="{% url 'index' %}" class="logo">FOOD DELIVERY</a>
            <nav class="nav">
                <a href="{% url 'index' %}">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</a>
                {% if user.is_authenticated %}
                <a href="{% url 'orders' %}">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
                <a href="{% url 'product_list' %}">–ü—Ä–æ–¥—É–∫—Ç—ã</a>
                <a href="{% url 'cart' %}" class="cart-link">
                    –ö–æ—Ä–∑–∏–Ω–∞{% if cart_items_count > 0 %} ({{ cart_items_count }}){% endif %}
                </a>
                <a href="{% url 'logout' %}">–í—ã—Ö–æ–¥ ({{ user.username }})</a>
                {% else %}
                <a href="{% url 'login' %}">–í—Ö–æ–¥</a>
                <a href="{% url 'register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
                {% if user.is_superuser %}
                <a href="/admin/" class="admin-link">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                {% endif %}
            </nav>
        </div>
    </div>

    <div class="container">
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="message message-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

        <a href="{% url 'index' %}" class="btn-secondary" style="margin-top: 0;"><span>‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º</span></a>

        <h1 style="margin-top: 32px;">{{ restaurant.name }}</h1>

        <div class="restaurant-info">
            <div class="restaurant-info-item">
                <strong>–ê–¥—Ä–µ—Å</strong>
                <span>{{ restaurant.address }}</span>
            </div>
            <div class="restaurant-info-item">
                <strong>–¢–µ–ª–µ—Ñ–æ–Ω</strong>
                <span>{{ restaurant.phone }}</span>
            </div>
        </div>

        <h2>–ú–µ–Ω—é</h2>

        {% if products %}
        <div class="product-list">
            {% for product in products %}
            <div class="product-card">
                <div class="product-card-header">
                    <strong>{{ product.name }}</strong>
                    <div class="product-price">{{ product.price }} ‚ÇΩ</div>
                </div>
                <p>{{ product.description }}</p>
                {% if user.is_authenticated %}
                <form method="post" action="{% url 'add_to_cart' product.id %}" style="margin-top: 20px;">
                    {% csrf_token %}
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" name="quantity" value="1" min="1" style="width: 60px; padding: 8px; background: #111; border: 1px solid #2a2a2a; color: #fff;">
                        <button type="submit" class="btn btn-small">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                    </div>
                    {% if product.in_cart > 0 %}
                    <p style="margin-top: 10px; color: #888; font-size: 0.9rem;">–í –∫–æ—Ä–∑–∏–Ω–µ: {{ product.in_cart }} —à—Ç.</p>
                    {% endif %}
                </form>
                {% else %}
                <p style="margin-top: 20px; color: #888;"><a href="{% url 'login' %}" style="color: #fff; text-decoration: underline;">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üçï</div>
            <h3>–ú–µ–Ω—é –ø—É—Å—Ç–æ</h3>
            <p>–í —ç—Ç–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ –ø–æ–∫–∞ –Ω–µ—Ç –±–ª—é–¥</p>
        </div>
        {% endif %}
    </div>
</body>
</html>
