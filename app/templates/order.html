{% load static %}
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ó–∞–∫–∞–∑ #{{ order.id }}</title>
  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

<body>
  <div class="header">
    <div class="container">
      <a href="{% url 'index' %}" class="logo">FOOD DELIVERY</a>
      <nav class="nav">
        <a href="{% url 'index' %}">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</a>
        <a href="{% url 'orders' %}">{% if user.is_superuser %}–í—Å–µ –∑–∞–∫–∞–∑—ã{% else %}–ú–æ–∏ –∑–∞–∫–∞–∑—ã{% endif %}</a>
        <a href="{% url 'product_list' %}">–ü—Ä–æ–¥—É–∫—Ç—ã</a>
        <a href="{% url 'cart' %}" class="cart-link">
          –ö–æ—Ä–∑–∏–Ω–∞{% if cart_items_count > 0 %} ({{ cart_items_count }}){% endif %}
        </a>
        <a href="{% url 'logout' %}">–í—ã—Ö–æ–¥ ({{ user.username }})</a>
        {% if user.is_superuser %}
        <a href="/admin/" class="admin-link">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
        {% endif %}
      </nav>
    </div>
  </div>

  <div class="container">
    <a href="{% url 'orders' %}" class="btn-secondary" style="margin-top: 0;"><span>‚Üê –ù–∞–∑–∞–¥ –∫ –∑–∞–∫–∞–∑–∞–º</span></a>

    <h1 style="margin-top: 32px;">–ó–∞–∫–∞–∑ #{{ order.id }}</h1>

    <div class="order-detail">
      <div class="order-detail-grid">
        {% if user.is_superuser %}
        <div class="order-detail-item">
          <strong>–ö–ª–∏–µ–Ω—Ç</strong>
          <span>{{ order.customer.username }}</span>
        </div>
        {% endif %}
        <div class="order-detail-item">
          <strong>–†–µ—Å—Ç–æ—Ä–∞–Ω</strong>
          <span>{{ order.restaurant.name }}</span>
        </div>
        <div class="order-detail-item">
          <strong>–°—Ç–∞—Ç—É—Å</strong>
          <span class="status {{ order.status }}">{{ order.get_status_display }}</span>
        </div>
        <div class="order-detail-item">
          <strong>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</strong>
          <span>{{ order.address }}</span>
        </div>
        {% if order.courier %}
        <div class="order-detail-item">
          <strong>–ö—É—Ä—å–µ—Ä</strong>
          <span>{{ order.courier.user.username }}</span>
        </div>
        {% endif %}
        <div class="order-detail-item">
          <strong>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</strong>
          <span>{{ order.created_at|date:"d.m.Y H:i" }}</span>
        </div>
      </div>
    </div>

    <div class="order-items-section">
      <h2>–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞</h2>

      {% if order.items.all %}
      <table class="order-items-table">
        <thead>
          <tr>
            <th>–ë–ª—é–¥–æ</th>
            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
            <th style="text-align: right;">–°—É–º–º–∞</th>
          </tr>
        </thead>
        <tbody>
          {% for item in order.items.all %}
          <tr>
            <td class="item-name">{{ item.product.name }}</td>
            <td class="item-quantity">{{ item.quantity }} √ó {{ item.price }} ‚ÇΩ</td>
            <td class="item-price">{{ item.get_total }} ‚ÇΩ</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="order-total">
        <div class="order-total-label">–ò—Ç–æ–≥–æ</div>
        <div class="order-total-value">{{ order.total_price }} ‚ÇΩ</div>
      </div>
      {% else %}
      <div class="empty-state">
        <div class="empty-state-icon">üõí</div>
        <h3>–í –∑–∞–∫–∞–∑–µ –Ω–µ—Ç –ø–æ–∑–∏—Ü–∏–π</h3>
      </div>
      {% endif %}
    </div>
  </div>
</body>

</html>
